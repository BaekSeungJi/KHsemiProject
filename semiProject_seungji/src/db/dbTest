DROP TABLE MEMBER
CASCADE CONSTRAINTS;

CREATE TABLE MEMBER(
   ID VARCHAR2(50) PRIMARY KEY,
   PWD VARCHAR2(50) NOT NULL,
   NAME VARCHAR2(50) NOT NULL,
   EMAIL VARCHAR2(50) UNIQUE,
   PHONE VARCHAR2(50) NOT NULL,
   BLACKLIST NUMBER(1) NOT NULL,   
   AUTH NUMBER(1) NOT NULL
);

INSERT INTO MEMBER
VALUES('admin', 'admin', '최고운영자', 'one@naver.com', '010-1111-2222', 0, 1);

INSERT INTO MEMBER
VALUES('hotel1', '123', '호텔1매니저', 'kim@naver.com', '010-1234-5678', 0, 2);

INSERT INTO MEMBER
VALUES('tmdwlfk', 'hahaha', '백승지', 'tmdwl@naver.com', '010-3857-1732', 0, 3);

INSERT INTO MEMBER
VALUES('aicici', 'hohoho', '차은우', 'aicici@gamil.com', '010-4631-4774', 0, 3);

SELECT * FROM MEMBER;
















DROP TABLE HOTEL
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_HOTEL;

CREATE TABLE HOTEL(
   SEQ NUMBER(8) PRIMARY KEY,
   
   ID VARCHAR2(50) NOT NULL,
   HOTELNAME VARCHAR2(50) NOT NULL,
   DESCRIPTION VARCHAR2(4000) NOT NULL,
   REGION VARCHAR2(50) NOT NULL,
   
   MAXPEOPLE NUMBER(10) NOT NULL,
   PRICE NUMBER(10) NOT NULL,
   HOTELPHONE VARCHAR2(50) NOT NULL,
   
   DEL NUMBER(1) NOT NULL,
   READCOUNT NUMBER(8) NOT NULL,
   REGDATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_HOTEL
START WITH 1
INCREMENT BY 1;

ALTER TABLE HOTEL
ADD CONSTRAINT FK_HOTEL_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);

ALTER TABLE HOTEL MODIFY(HOTELPHONE VARCHAR2(50));


INSERT INTO HOTEL
VALUES(SEQ_HOTEL.NEXTVAL, 'hotel1', '노보텔 앰배서더 서울 강남', '<4성급:한국관광공사 인증> - 
노보텔 앰배서더 강남은 9호선 신논현역 4번 출구에서 도보 4분 거리에 있습니다. 호텔에서 걸어서 10분 거리에 논현동 먹자골목이 있고, 15분 거리에 강남역이 있습니다. 
강남역에서 지하철 2호선을 이용하여 세 정거장 가시면 코엑스몰, 현대백화점 무역센터점 등을 가실 수 있습니다. 이 호텔에서는 거품 욕조, 실내 수영장 또한 마련되어 있습니다. 
이 호텔에서는 귀빈층, 키즈 클럽, 골프코스 등을 포함한 다양한 시설과 서비스를 제공하고 있습니다. 직원들이 24시간 대기하고 있으며 투어 예약 및 티켓 예매를 지원해 드립니다. 
운동기구가 잘 갖춰진 피트니스센터도 있습니다. 
이 호텔의 현대적인 전 객실에는 케이블/위성 채널 및 미니 바 등이 구비되어 있고 욕실에는 샤워 시설 및 헤어드라이어도 있습니다. 
모든 객실에 생수, 평면 TV, 주문형 영화 서비스 등이 완비되어 있습니다. 
고객님들은 주변 지역에서 각종 액티비티로 가득찬 흥미진진한 관광을 시작하시기 전에 호텔 내 카페에서 간단하게 식사를 드실 수 있습니다. 
혹은 하루의 관광을 끝낸 후 이 카페에서 음료를 마시면서 휴식을 취하실 수 있습니다. 저녁에 여유롭게 술 한잔과 함께 휴식을 즐기실 수 있는 아늑한 라운지 바가 있습니다. 
날마다 뷔페식 아침 식사를 즐기실 수 있습니다.', '서울특별시 강남구 역삼동 603',
      3, 60000, '02-567-1101', 0,0, SYSDATE);

INSERT INTO HOTEL
VALUES(SEQ_HOTEL.NEXTVAL, 'hotel1', '머큐어 서울 앰배서더 강남 쏘도베', '머큐어 서울 앰배서더 강남 쏘도베는 2호선 역삼역 4번 출구에서 도보 2분 거리에 있습니다. 
또한 지하철로 두 정거장이면 코엑스몰, 현대백화점 무역센터점, 코엑스 아쿠아리움까지 가실 수 있습니다. 
차로 5분이면 압구정 로데오거리나 논현동 먹자골목, 10분이면 선정릉 같은 관광지가 있습니다. 
이 호텔은 서울 지역을 방문하시는 분들이 머물기에 좋은 숙소입니다. 사우나, 루프탑 테라스, 무료 무선 인터넷 또한 마련되어 있습니다. 
현대적인 이 호텔에는 카페, 귀빈층, 환전 등이 완비되어 있습니다. 친절한 미소로 투숙객들을 지원해드릴 직원들이 항시 대기하고 있습니다.
호텔의 널찍한 객실에는 슬리퍼, 미니 바 및 전용 욕실 등이 완비되어 있습니다. 모든 객실에 생수, 평면 TV, 객실 내 앉을 공간 등이 구비되어 있습니다. 
호텔 내에 있는 Kloud 레스토랑은 유명한 식당입니다. 저녁에 여유롭게 술 한잔과 함께 휴식을 취하실 수 있는 아늑한 라운지 바가 있습니다. 
그 밖에도 인근에는 수많은 레스토랑과 분위기 좋은 카페가 즐비해 있습니다.', '서울특별시 강남구 역삼동 642',
      2, 30000, '02-2050-6000', 0,0, SYSDATE);

SELECT * FROM HOTEL;



SELECT SEQ, ID, HOTELNAME, REGION, MAXPEOPLE, PRICE, HOTELPHONE, DEL, READCOUNT
FROM HOTEL
WHERE REGION LIKE '%역삼%'
AND PRICE >= 50000
AND MAXPEOPLE >= 3
ORDER BY REGDATE DESC;











DROP TABLE RESERVE
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_RESERVE;

CREATE TABLE RESERVE(
   SEQ NUMBER(8) PRIMARY KEY,
   
   ID VARCHAR2(50) NOT NULL,
   HOTELNAME VARCHAR2(50) NOT NULL,
   REQUEST VARCHAR2(200),
   CHECKIN VARCHAR2(50) NOT NULL,
   CHECKOUT VARCHAR2(50) NOT NULL,
   
   REGDATE DATE NOT NULL,
   DEL NUMBER(1) NOT NULL
);

CREATE SEQUENCE SEQ_RESERVE
START WITH 1
INCREMENT BY 1;

ALTER TABLE RESERVE
ADD CONSTRAINT FK_RESERVE_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);


INSERT INTO RESERVE
VALUES(SEQ_RESERVE.NEXTVAL, 'tmdwlfk', '머큐어 서울 앰배서더 강남 쏘도베', 
'뷰 좋은 방으로 주시면 감사하겠습니다^^.. 그리고 담배냄새 안나게 해주세요 꼭이요!',
'2018/10/16', '2018/10/17', SYSDATE, 0);

INSERT INTO RESERVE
VALUES(SEQ_RESERVE.NEXTVAL, 'aicici', '머큐어 서울 앰배서더 강남 쏘도베', 
'아침 일찍 도착할 것 같은데 오전 입실 가능할까요? 가능하면 저층으로 부탁드립니다.',
'2018/10/18', '2018/10/20', SYSDATE, 0);

SELECT * FROM RESERVE;













DROP TABLE PDS
CASCADE CONSTRAINT;

DROP SEQUENCE SEQ_PDS;

CREATE TABLE PDS(
   SEQ NUMBER(8) PRIMARY KEY,
   
   ID VARCHAR2(50) NOT NULL,
   TITLE VARCHAR2(200) NOT NULL,
   CONTENT VARCHAR2(4000) NOT NULL,
   
   READCOUNT NUMBER(8) NOT NULL,
   DOWNCOUNT NUMBER(8) NOT NULL,
   
   REF NUMBER(8) NOT NULL,
   STEP NUMBER(8) NOT NULL,
   DEPTH NUMBER(8) NOT NULL,
   
   DEL NUMBER(1) NOT NULL,
   REGDATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_PDS
START WITH 1 INCREMENT BY 1;

ALTER TABLE PDS
ADD CONSTRAINT FK_PDS_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);

SELECT * FROM PDS;
















DROP TABLE REVIEW
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_REVIEW;

CREATE TABLE REVIEW(
   NUM NUMBER(8) NOT NULL,
   
   ID VARCHAR2(50) NOT NULL,
   HOTELNAME VARCHAR2(50) NOT NULL,
   TITLE VARCHAR2(50) NOT NULL,
   CONTENT VARCHAR2(300) NOT NULL,
   
   SCORE NUMBER(10) NOT NULL,
   
   DEL NUMBER(1) NOT NULL,
   READCOUNT NUMBER(8) NOT NULL,
   REGDATE DATE NOT NULL
);

ALTER TABLE REVIEW
ADD CONSTRAINT FK_REVIEW_NUM FOREIGN KEY(NUM)
REFERENCES RESERVE(SEQ);

INSERT INTO REVIEW
VALUES(1, 'tmdwlfk', '머큐어 서울 앰배서더 강남 쏘도베', 
'호텔 추천 후기입니다.',
'역에서 가장 가까운 호텔이란 점이 제일 맘에 들었어요. 
여기저기 많이 찾아봤는데 오늘의 숙소에서 예약하길 잘한 것 같아요. 
앞으로도 번창하세요 ㅎㅎ...',
5, 0, 0, SYSDATE);

INSERT INTO REVIEW
VALUES(22, 'aicici', '머큐어 서울 앰배서더 강남 쏘도베', 
'2박동안 정말 마음편히 쉬다 갑니다^^',
'여기저기 많이 놀러다니는 사람입니다. 평소에 숙소에 별 미련이 없거든요. 가성비충이라..
이번 호텔은 정말 밖에 나가기가 아까울 정도ㅋㅋ
덕분에 이번 휴가 제대로 호캉스 즐기고 가네요~ 강추합니다.',
4, 0, 0, SYSDATE);

SELECT * FROM REVIEW;















DROP TABLE FILE_DB
CASCADE CONSTRAINT;

CREATE TABLE FILE_DB(
   NUM NUMBER(8) NOT NULL,
   FILENAME VARCHAR2(50) NOT NULL,
   REALNAME VARCHAR2(50) NOT NULL
);

ALTER TABLE FILE_DB
ADD CONSTRAINT FK_FILE_NUM FOREIGN KEY(NUM)
REFERENCES PDS(SEQ);

SELECT * FROM FILE_DB;

