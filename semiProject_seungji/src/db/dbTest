DROP TABLE MEMBER
CASCADE CONSTRAINTS;

CREATE TABLE MEMBER(
	ID VARCHAR2(50) PRIMARY KEY,
	PWD VARCHAR2(50) NOT NULL,
	NAME VARCHAR2(50) NOT NULL,
	EMAIL VARCHAR2(50) UNIQUE,
	PHONE VARCHAR2(50) NOT NULL,
	BLACKLIST NUMBER(1) NOT NULL,	
	AUTH NUMBER(1) NOT NULL
);

INSERT INTO MEMBER
VALUES('admin', 'admin', '최고운영자', 'one@naver.com', '01011112222', 0, 1);

INSERT INTO MEMBER
VALUES('hotel1', '123', '호텔1매니저', 'kim@naver.com', '01012345678', 0, 2);

SELECT * FROM MEMBER;















DROP TABLE HOTEL
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_HOTEL;

CREATE TABLE HOTEL(
	SEQ NUMBER(8) PRIMARY KEY,
	
	ID VARCHAR2(50) NOT NULL,
	HOTELNAME VARCHAR2(50) NOT NULL,
	DESCRIPTION VARCHAR2(4000) NOT NULL,
	REGION VARCHAR2(50) NOT NULL,
	
	MAXPEOPLE NUMBER(10) NOT NULL,
	PRICE NUMBER(10) NOT NULL,
	HOTELPHONE NUMBER(12) NOT NULL,
	
	DEL NUMBER(1) NOT NULL,
	READCOUNT NUMBER(8) NOT NULL,
	REGDATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_HOTEL
START WITH 1
INCREMENT BY 1;

ALTER TABLE HOTEL
ADD CONSTRAINT FK_HOTEL_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);


INSERT INTO MEMBER
VALUES(SEQ_HOTEL.NEXTVAL, 'hotel1', '노보텔 앰배서더 서울 강남', '넓은 면적+전 객실 에이스 침대&스파욕조', '서울특별시 강남구 역삼동 718-13',
		3, 60000, );

SELECT * FROM MEMBER;















DROP TABLE RESERVE
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_RESERVE;

CREATE TABLE RESERVE(
	SEQ NUMBER(8) PRIMARY KEY,
	
	ID VARCHAR2(50) NOT NULL,
	HOTELNAME VARCHAR2(50) NOT NULL,
	REQUEST VARCHAR2(200),
	REALDATE VARCHAR2(50) NOT NULL,
	
	REGDATE DATE NOT NULL,
	DEL NUMBER(1) NOT NULL
);

CREATE SEQUENCE SEQ_RESERVE
START WITH 1
INCREMENT BY 1;

ALTER TABLE RESERVE
ADD CONSTRAINT FK_RESERVE_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);

















DROP TABLE PDS
CASCADE CONSTRAINT;

DROP SEQUENCE SEQ_PDS;

CREATE TABLE PDS(
	SEQ NUMBER(8) PRIMARY KEY,
	
	ID VARCHAR2(50) NOT NULL,
	TITLE VARCHAR2(200) NOT NULL,
	CONTENT VARCHAR2(4000) NOT NULL,
	
	READCOUNT NUMBER(8) NOT NULL,
	DOWNCOUNT NUMBER(8) NOT NULL,
	
	REF NUMBER(8) NOT NULL,
	STEP NUMBER(8) NOT NULL,
	DEPTH NUMBER(8) NOT NULL,
	
	DEL NUMBER(1) NOT NULL,
	REGDATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_PDS
START WITH 1 INCREMENT BY 1;

ALTER TABLE PDS
ADD CONSTRAINT FK_PDS_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);


















DROP TABLE REVIEW
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_REVIEW;

CREATE TABLE REVIEW(
	NUM NUMBER(8) NOT NULL,
	
	ID VARCHAR2(50) NOT NULL,
	HOTELNAME VARCHAR2(50) NOT NULL,
	TITLE VARCHAR2(50) NOT NULL,
	CONTENT VARCHAR2(300) NOT NULL,
	
	SCORE NUMBER(10) NOT NULL,
	
	DEL NUMBER(1) NOT NULL,
	READCOUNT NUMBER(8) NOT NULL,
	REGDATE DATE NOT NULL
);

ALTER TABLE REVIEW
ADD CONSTRAINT FK_REVIEW_NUM FOREIGN KEY(NUM)
REFERENCES RESERVE(SEQ);

















DROP TABLE FILE_DB
CASCADE CONSTRAINT;

CREATE TABLE FILE_DB(
	NUM NUMBER(8) NOT NULL,
	FILENAME VARCHAR2(50) NOT NULL,
	REALNAME VARCHAR2(50) NOT NULL
);

ALTER TABLE FILE_DB
ADD CONSTRAINT FK_FILE_NUM FOREIGN KEY(NUM)
REFERENCES PDS(SEQ);



